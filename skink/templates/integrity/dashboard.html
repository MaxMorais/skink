<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
    <xi:include href="default.html" />
    <head>
        <title>Home</title>
    </head>
    <body>
        <div class="dashboard_content">
            <div class="project" py:for="project in projects">
                <h2 class="project_header">
                    <a class="project_name" href="/project/${project.id}">${project.name}</a>
                    <!-- The class in the images here is used for JQuery selectors only and thus do not exist. -->
                    <ul class="project_actions">
                        <li><img src="/media/integrity/images/control_pause.png" alt="Stop monitoring this project" border="0" id="stop_monitoring_${project.id}" class="img_stop_monitoring" /></li>
                        <li><img src="/media/integrity/images/control_stop.png" alt="Stop current build" border="0" id="stop_current_build_${project.id}" class="img_stop_current_build" /></li>
                        <li><img src="/media/integrity/images/information.png" alt="Check the current build log" border="0" id="more_info_${project.id}" class="img_more_info" /></li>
                        <li><img src="/media/integrity/images/ajax-loader.gif" alt="Currently building..." border="0" id="currently_building_${project.id}" class="img_currently_building" /></li>
                    </ul>
                </h2>
                <div class="project_log">
                    <div py:if="project.builds">
                        <p class="last_build_commit_hash" py:if="project.builds[0].commit_number">${project.builds[0].commit_number}</p>
                        <p class="last_build_commit_author" py:if="project.builds[0].commit_author">${project.builds[0].commit_author}</p>
                        <p class="last_build_commit_text" py:if="project.builds[0].commit_text">${project.builds[0].commit_text}</p>
                    </div>
                    <div py:if="not project.builds">
                        <p class="project_never_built">Never built!</p>
                    </div>
                    <div class="start_build">
                        <form action='/project/${project.id}/build' method='post'>
                            <button title='Build Project' type='submit'>build project</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

<br /><br />
        <p id="new" py:if="projects">
            <a class="integrity_link" href="/project/new">Add a new project</a>
        </p>

        <div id="projects" py:if="not projects">
            Looks like you don't have any projects!<br />
            How about <a class="integrity_link" href="/project/new">creating one now</a>?
        </div>

    </body>
</html>
